language: python

python:
  - 3.7

runtime:
  - nodePool: shippable_shared_aarch64
  - nodePool: shippable_shared_aarch32

build:
  ci:
    - apt-get install libatlas3-base libatlas-base-dev libatlas-dev
    - pip install numpy scipy cython
    - pip install pandas matplotlib pillow
    - pip install pytest pytest-cov
    - pip install -e . --verbose
    - export SKLEARN_SKIP_NETWORK_TESTS=1
    - mkdir tests_sklearn
    - cp setup.cfg tests_sklearn
    - cd tests_sklearn
    - pytest --showlocals --duration=20 --pyargs --cov sklearn sklearn
